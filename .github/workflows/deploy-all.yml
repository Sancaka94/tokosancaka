name: Deploy via SSH (Rsync)

on:
  push:
    branches:
      - master

jobs:
  web-deploy:
    name: ðŸš€ Kirim Cepat (Rsync)
    runs-on: ubuntu-latest
    steps:
    - name: ðŸšš Ambil kode terbaru
      uses: actions/checkout@v4

    - name: ðŸš€ Sync ke Server
      uses: easingthemes/ssh-deploy@v5.0.0
      with:
        # KREDENSIAL
        SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
        REMOTE_HOST: ${{ secrets.FTP_SERVER }}
        REMOTE_USER: ${{ secrets.FTP_USERNAME }}

        # SUMBER & TUJUAN
        SOURCE: "./"
        TARGET: "domains/"

        # SETTINGAN PINTAR (Hanya kirim yang berubah & hapus yang tidak ada di git)
        ARGS: "-rltgoDzvO --delete"
        
        # SATPAM (File yang tidak boleh dikirim)
        EXCLUDE: ".git/, .github/, .gitignore, .env, .env.*, node_modules/, vendor/, *.sql, *.log, Data Backup/"